/***************************************************************************/ /**
  @file     App.c
  @brief    Application functions
  @author   Grupo 5
 ******************************************************************************/

/*******************************************************************************
 	 	 	 	 	 	 	 INCLUDE HEADER FILES
 *******************************************************************************
 ******************************************************************************/

#include <stdio.h>
#include <stdbool.h>
#include <string.h>
#include <stdint.h>

#include "fsm_table.h"
#include "ev_queue.h"
#include "spectrometer.h"

/*******************************************************************************
 *******************************************************************************
 	 	 	 	 CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 *******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 *******************************************************************************
  	  	  	FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 *******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 *******************************************************************************
 	 	 	 	 	 ENUMERATIONS AND STRUCTURES AND TYPEDEFS
 *******************************************************************************
 ******************************************************************************/

/*******************************************************************************
 *******************************************************************************
                        GLOBAL VARIABLES
 *******************************************************************************
 ******************************************************************************/

STATE * presentState;
EventType event;

/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

// Initialization functions
void App_Init(void)
{
	// Ac√° van todas las inicializaciones

	// Init Timers
	timerInit();
	// Init event Queue
	initQueue();
	// Init state of MP3
	presentState = FSM_GetInitState();
}

// Function to run on infinite loop
void App_Run(void)
{
	// Emit event for FSM
	//getEvents();
	// Get event and store it for later
	event = getEvent();
	if (event != NONE_EV)
	{
		// We give present state and receive next state
		presentState = fsm(presentState, event);
	}
}

/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/
